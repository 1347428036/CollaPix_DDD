databaseName: cloud_picture
dataSources:
  cloud_picture:
    dataSourceClassName: $${shardingsphere.datasource.collapix.dataSourceClassName::com.zaxxer.hikari.HikariDataSource}
    driverClassName: $${shardingsphere.datasource.collapix.driverClassName::com.mysql.cj.jdbc.Driver}
    jdbcUrl: $${shardingsphere.datasource.collapix.jdbcUrl::jdbc:mysql://192.168.117.128:3306/cloud_picture?useUnicode=true&characterEncoding=utf-8&allowPublicKeyRetrieval=true&useSSL=false&serverTimezone=Asia/Shanghai}
    username: $${shardingsphere.datasource.collapix.username::root}
    password: $${shardingsphere.datasource.collapix.password::rootpass001}
rules:
  - !SINGLE
    tables:
      - "cloud_picture.*"
  - !SHARDING
    tables:
      picture:
        actualDataNodes: cloud_picture.picture
        tableStrategy:
          standard:
            shardingColumn: spaceId
            shardingAlgorithmName: picture_sharding_algorithm
    defaultTableStrategy:
      none:
    shardingAlgorithms:
      picture_sharding_algorithm:
        type: CLASS_BASED
        props:
          strategy: standard
          algorithmClassName: com.esmiao.collapix.shared.sharding.PictureShardingAlgorithm
props:
  sql-show: $${shardingsphere.showSql::false}