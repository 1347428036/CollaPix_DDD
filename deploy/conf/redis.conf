# 基础配置

# 指定端口为6380
port 6380
# 允许所有IP访问（需配合防火墙规则）
bind 0.0.0.0
# Docker容器需禁用后台模式
daemonize no
# 启用保护模式，需配合密码使用
protected-mode yes
# 设置高强度密码（至少12位含大小写+特殊字符）
requirepass redispass001
# 数据持久化目录（需挂载到宿主机）
dir /data

# 资源限制（适配4G内存主机）

# 最大使用内存（保留1G给系统）
maxmemory 1gb
# 内存不足时删除最近最少使用的键
maxmemory-policy volatile-lru

# 安全增强设置

# 禁用高危命令
rename-command FLUSHDB ""
rename-command FLUSHALL ""
# 重命名敏感命令
#rename-command CONFIG "GUARDED_CONFIG"
# 禁止默认订阅所有频道
acl-pubsub-default resetchannels

# 持久化配置

# 开启AOF持久化（数据更安全）
appendonly yes
# 平衡性能与数据安全
appendfsync everysec

# 日志与监控

# 日志文件路径
logfile "/var/log/redis/redis.log"
# 生产环境建议日志级别
loglevel notice
